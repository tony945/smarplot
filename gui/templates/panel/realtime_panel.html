{% extends 'panel/panel_base.html' %}


{% block title %}即時資料頁面{% endblock %}
{% load static %}
{% block css&js %}
<link rel="stylesheet" type="text/css" href="{% static 'realtime_panel/style.css' %}">
<script src="{% static 'realtime_panel/realtime_panel.js' %}"></script>
{% endblock %}

{% block content %}
<!--及時資料表-->
<div class="row justify-content-md-center" style="padding-top: 80px;">
    <div class="col col-md-6 ">
        <table id="realtime_table" class="table table-striped" style="font-size: 4vw; font-weight:bold;">
            <tr>
                <td>溫度: </td>
                <td id="temp"></td>
            </tr>
            <tr>
                <td>土壤濕度: </td>
                <td id="soil"></td>
            </tr>
            <tr>
                <td>氣壓:</td>
                <td>1013.25hPa</td>
            </tr>
            <tr>
                <td>光照: </td>
                <td id="light"></td>
            </tr>
        </table>
    </div>

    <!--控制面板-->
    <div id="control_panel" class="col col-md-6 ">

        <div id="scoringBlock" class="row justify-content-center">
            <div>
                <h2 class="mr-5">每日評分</h2>
            </div>
            <div class="row">
                <div class="col col-md-2.4">
                    <img src="{% static 'realtime_panel/whitestar.PNG' %}" class="img-fluid" alt="Scoring" />
                </div>
                <div class="col col-md-2.4">
                    <img src="{% static 'realtime_panel/whitestar.PNG' %}" class="img-fluid" alt="Scoring" />
                </div>
                <div class="col col-md-2.4">
                    <img src="{% static 'realtime_panel/whitestar.PNG' %}" class="img-fluid" alt="Scoring" />
                </div>
                <div class="col col-md-2.4">
                    <img src="{% static 'realtime_panel/whitestar.PNG' %}" class="img-fluid" alt="Scoring" />
                </div>
                <div class="col col-md-2.4">
                    <img src="{% static 'realtime_panel/whitestar.PNG' %}" class="img-fluid" alt="Scoring" />
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col col-md-6 ">
                <h1>自動灑水</h1>
                <label class="switch">
                    <input type="checkbox">
                    <span class="slider"></span>
                </label>
                <h1>光線開關</h1>
                <label class="switch">
                    <input type="checkbox">
                    <span class="slider"></span>
                </label><br />
            </div>

            <div id="manual_watering" class="col col-md-6 ">
                <h2>手動澆花按鈕</h2>

                <div class="btn-group" id="toggle_event_editing">
                    <button type="button" class="btn btn-info locked_active">OFF</button>
                    <button type="button" class="btn btn-default unlocked_inactive">ON</button>
                </div>
                <div class="alert alert-info" id="switch_status">手動澆花關閉.</div>

            </div>
        </div>


    </div>

</div>
</div>




<!-- Since we are using django's template language we can ONLY do this within our template between <script> tags -->
<script>
    $("#scoringBlock img").mouseover(over).mouseout(out).click(click);

    function over() {
        let num = $("#scoringBlock img").index(this);
        let stars = $("#scoringBlock img");

        for (let i = 0; i <= num; i++) {
            stars[i].src = '{% static "realtime_panel/yellowstar.PNG" %}';
        }
    }

    function out() {
        let num = $("#scoringBlock img").index(this);
        let stars = $("#scoringBlock img");

        for (let i = 0; i <= num; i++) {
            stars[i].src = '{% static "realtime_panel/whitestar.PNG" %}';
        }
    }

    function click() {
        let num = $("#scoringBlock img").index(this);
        let stars = $("#scoringBlock img");

        for (let i = 0; i <= 4; i++) {
            stars[i].src = '{% static "realtime_panel/whitestar.PNG" %}';
        }

        for (let i = 0; i <= num; i++) {
            stars[i].src = '{% static "realtime_panel/redstar.PNG" %}';
        }

        $("#scoringBlock img").off("mouseover").off("mouseout");

        ajax

    }

</script>
{% endblock %}